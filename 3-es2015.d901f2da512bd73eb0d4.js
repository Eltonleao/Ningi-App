(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{X3zk:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginPageModule",(function(){return y}));var i=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),s=n("tyNb"),a=n("mrSG"),l=n("Wcq6"),c=n("fXoL"),d=n("Oipj"),u=n("CqG3"),h=n("hLxd"),p=n("e8h1"),g=n("Sy1n"),m=n("up+p");const v=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o,r,s,a,l){this.fAuth=e,this.afs=t,this.ningiService=n,this.storage=i,this.navCtrl=o,this.loadingController=r,this.app=s,this.gplus=a,this.platform=l,console.log("entrando em login page..."),this.user={displayName:"User",photoURL:"https://picsum.photos/200"},this.storage.get("user").then(e=>{e&&(this.user=e)})}ngOnInit(){}googleLogin(){return Object(a.a)(this,void 0,void 0,(function*(){var e=yield this.loadingController.create({spinner:"crescent"});if(yield e.present(),this.platform.is("cordova")){yield console.log("login mobile");try{this.gplus.login({}).then(t=>Object(a.a)(this,void 0,void 0,(function*(){yield e.dismiss(),yield this.updateUserDataCordova(t)}))).catch(e=>{alert(e),console.error(e)})}catch(n){console.log(n),e=yield this.loadingController.create({message:n,spinner:"crescent"}),yield e.present(),setTimeout((function(){e.dismiss()}),3e3)}}else{var t=new l.auth.GoogleAuthProvider;const n=yield this.fAuth.auth.signInWithPopup(t);yield this.updateUserDataBrowser(n.user),yield e.dismiss()}}))}updateUserDataCordova(e){return Object(a.a)(this,void 0,void 0,(function*(){console.log("updating user...");var t=this;t.ningiService.getuser(e.email,(function(e){console.log(e),e?t.storage.set("user",e).then(()=>Object(a.a)(this,void 0,void 0,(function*(){t.app.showMenu=!0,t.navCtrl.navigateRoot("tabs/dashboard")}))):alert("Oops, n\xe3o foi fazer o login, voc\xea precisa se cadastrar no sistema primeiro.")}))}))}updateUserDataBrowser(e){return Object(a.a)(this,void 0,void 0,(function*(){const t={uid:e.email,login_tipo:"google",email:e.email,displayName:e.displayName,photoURL:e.photoURL,deletado:0},n=yield this.loadingController.create({spinner:"crescent"});yield n.present(),yield this.storage.set("user",t),yield this.ningiService.updateUser(t).then(e=>Object(a.a)(this,void 0,void 0,(function*(){this.navCtrl.navigateForward("/tabs/dashboard"),yield n.dismiss()})))}))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](d.AngularFireAuth),c["\u0275\u0275directiveInject"](u.AngularFirestore),c["\u0275\u0275directiveInject"](h.a),c["\u0275\u0275directiveInject"](p.b),c["\u0275\u0275directiveInject"](r.bb),c["\u0275\u0275directiveInject"](r.Z),c["\u0275\u0275directiveInject"](g.a),c["\u0275\u0275directiveInject"](m.a),c["\u0275\u0275directiveInject"](r.db))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-login"]],decls:10,vars:0,consts:[["color","dark"],["slot","start",1,"menu-btn"],[1,"ion-text-center"],[1,"btn-container"],["fill","solid","expand","black","color","dark",3,"click"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"ion-header"),c["\u0275\u0275elementStart"](1,"ion-toolbar",0),c["\u0275\u0275elementStart"](2,"ion-buttons",1),c["\u0275\u0275element"](3,"ion-menu-button"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"ion-title",2),c["\u0275\u0275text"](5,"Login"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"ion-content"),c["\u0275\u0275elementStart"](7,"div",3),c["\u0275\u0275elementStart"](8,"ion-button",4),c["\u0275\u0275listener"]("click",(function(){return t.googleLogin()})),c["\u0275\u0275text"](9,"Login com Google"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())},directives:[r.t,r.W,r.h,r.D,r.V,r.o,r.g],styles:[".btn-container[_ngcontent-%COMP%]{text-align:center;justify-self:center;display:flex;justify-content:center;align-self:center;height:100%;align-items:center}"]}),e})()}];let f=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.i.forChild(v)],s.i]}),e})(),y=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.b,o.a,r.X,f]]}),e})()}}]);