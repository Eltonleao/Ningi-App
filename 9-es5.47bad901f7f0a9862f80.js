!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{ZEuG:function(n,r,i){"use strict";i.r(r),i.d(r,"PerfilPageModule",(function(){return w}));var a=i("ofXK"),o=i("3Pt+"),c=i("TEn/"),s=i("tyNb"),u=i("mrSG"),d=i("fXoL"),l=i("e8h1"),m=i("hLxd");function p(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"ion-card",3),d["\u0275\u0275elementStart"](1,"ion-card-header"),d["\u0275\u0275elementStart"](2,"ion-card-title"),d["\u0275\u0275text"](3,"Account Partner"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](4,"img",10),d["\u0275\u0275elementStart"](5,"ion-card-title"),d["\u0275\u0275text"](6,"No Partner Yet"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"ion-card-content"),d["\u0275\u0275elementStart"](8,"ion-button",8),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().addPartner()})),d["\u0275\u0275text"](9,"Add Partner"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}}function f(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"ion-card",3),d["\u0275\u0275elementStart"](1,"ion-card-header"),d["\u0275\u0275elementStart"](2,"ion-card-title"),d["\u0275\u0275text"](3,"Account Partner"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](4,"img",5),d["\u0275\u0275elementStart"](5,"ion-card-title"),d["\u0275\u0275text"](6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"ion-card-content"),d["\u0275\u0275elementStart"](8,"ion-button",8),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().addPartner()})),d["\u0275\u0275text"](9,"Change Partner"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var r=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](4),d["\u0275\u0275propertyInterpolate"]("src",r.partner.photoURL,d["\u0275\u0275sanitizeUrl"]),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](r.partner.displayName)}}var g,h,v,x=[{path:"",component:(g=function(){function n(t,r,i){e(this,n),this.storage=t,this.alertCtrl=r,this.ningiService=i,this.user={},this.myMagickWord="nenhuma palavra m\xe1gica encontrada..."}var r,i,a;return r=n,(i=[{key:"ngOnInit",value:function(){var e=this,t=this;this.storage.get("user").then((function(n){e.user=n,e.ningiService.getMyMagickWord().then((function(n){return Object(u.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,!e.t0){e.next=7;break}return e.next=4,n.magickword;case 4:return t.myMagickWord=e.sent,e.next=7,t.ningiService.getPartner((function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.ningiService.getuser(e.partner_email,(function(e){console.log("partner",e),t.partner=e,t.storage.set("partner",e)}));case 1:case"end":return n.stop()}}),n)})))}));case 7:case"end":return e.stop()}}),e)})))}))}))}},{key:"updateMyMagickWord",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.alertCtrl.create({message:"Magick Word Updated!"}),e.next=3,this.ningiService.updateMyMagickWord(this.myMagickWord).then((function(){return Object(u.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.present(),setTimeout((function(){return Object(u.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.dismiss();case 3:case"end":return e.stop()}}),e)})))}),1e3);case 4:case"end":return e.stop()}}),e)})))}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"addPartner",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.alertCtrl.create({message:"Insira a palavra m\xe1gica",inputs:[{name:"magick_word",type:"text",placeholder:"Magick Word",attributes:{autocomplete:"false",required:!0}}],buttons:[{text:"Cancelar"},{text:"Ok",handler:function(e){return Object(u.a)(r,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""==e.magick_word){n.next=5;break}return n.next=3,this.ningiService.checkMagickWord(e.magick_word).then((function(e){return Object(u.a)(r,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}console.log("partner founded: ",e),this.ningiService.addPartner(e,(function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.alertCtrl.create({message:"Partner Updated!"}),e.next=3,n;case 3:e.sent.present(),setTimeout((function(){return Object(u.a)(r,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:e.sent.dismiss();case 3:case"end":return e.stop()}}),e)})))}),1e3),t.ngOnInit();case 6:case"end":return e.stop()}}),e)})))})),n.next=9;break;case 4:return r=t.alertCtrl.create({message:"No user with that Magick Word has founded..."}),n.next=7,r;case 7:n.sent.present(),setTimeout((function(){return Object(u.a)(i,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:e.sent.dismiss();case 3:case"end":return e.stop()}}),e)})))}),1e3);case 9:case"end":return n.stop()}}),n,this)})))}));case 3:n.next=6;break;case 5:this.addPartner();case 6:case"end":return n.stop()}}),n,this)})))}}]});case 3:return n=e.sent,e.next=6,n.present();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"doRefresh",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ngOnInit();case 2:return t.next=4,e.target.complete();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"ionViewDidEnter",value:function(){console.log("I'm alive!"),this.ngOnInit()}}])&&t(r.prototype,i),a&&t(r,a),n}(),g.\u0275fac=function(e){return new(e||g)(d["\u0275\u0275directiveInject"](l.b),d["\u0275\u0275directiveInject"](c.a),d["\u0275\u0275directiveInject"](m.a))},g.\u0275cmp=d["\u0275\u0275defineComponent"]({type:g,selectors:[["app-perfil"]],decls:25,vars:5,consts:[["color","dark"],["slot","start",1,"menu-btn"],["manu","main-menu"],[1,"ion-text-center"],["slot","fixed",3,"ionRefresh"],[1,"perfil-img",3,"src"],["position","stacked",1,"text-align-center"],["type","text","placeholder","My Magick Word","placeholder","Insert Magick Word",1,"ion-text-center",3,"ngModel","ngModelChange"],[3,"click"],["class","ion-text-center",4,"ngIf"],["src","https://picsum.photos/100",1,"perfil-img"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"ion-header"),d["\u0275\u0275elementStart"](1,"ion-toolbar",0),d["\u0275\u0275elementStart"](2,"ion-buttons",1),d["\u0275\u0275element"](3,"ion-menu-button",2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"ion-title",3),d["\u0275\u0275text"](5,"Perfil"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"ion-content"),d["\u0275\u0275elementStart"](7,"ion-refresher",4),d["\u0275\u0275listener"]("ionRefresh",(function(e){return t.doRefresh(e)})),d["\u0275\u0275element"](8,"ion-refresher-content"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"ion-card",3),d["\u0275\u0275elementStart"](10,"ion-card-title"),d["\u0275\u0275text"](11,"Account"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](12,"img",5),d["\u0275\u0275elementStart"](13,"ion-card-header"),d["\u0275\u0275elementStart"](14,"ion-card-title"),d["\u0275\u0275text"](15),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](16,"ion-card-content"),d["\u0275\u0275elementStart"](17,"ion-item"),d["\u0275\u0275elementStart"](18,"ion-label",6),d["\u0275\u0275text"](19,"Magick Word"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"ion-input",7),d["\u0275\u0275listener"]("ngModelChange",(function(e){return t.myMagickWord=e})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"ion-button",8),d["\u0275\u0275listener"]("click",(function(){return t.updateMyMagickWord()})),d["\u0275\u0275text"](22,"Change Magick Word"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](23,p,10,0,"ion-card",9),d["\u0275\u0275template"](24,f,10,2,"ion-card",9),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](12),d["\u0275\u0275propertyInterpolate"]("src",t.user.photoURL,d["\u0275\u0275sanitizeUrl"]),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](t.user.displayName),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngModel",t.myMagickWord),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngIf",!t.partner),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.partner))},directives:[c.t,c.W,c.h,c.D,c.V,c.o,c.E,c.F,c.i,c.m,c.k,c.j,c.w,c.A,c.v,c.hb,o.d,o.e,c.g,a.j],styles:[".perfil-img[_ngcontent-%COMP%]{border-radius:50%;margin-top:10px;height:100px;max-width:100px}"]}),g)}],k=((v=function t(){e(this,t)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:v}),v.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||v)},imports:[[s.i.forChild(x)],s.i]}),v),w=((h=function t(){e(this,t)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:h}),h.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||h)},imports:[[a.b,o.a,c.X,k]]}),h)}}])}();